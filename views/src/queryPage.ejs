<head>
  <!-- js -->
  <script src="/js/datatable.js"></script>
  <script src="/js/inputFieldRestriction.js" defer></script>

  <!-- Slim select -->
  <script src="/js/slim-select.js" defer></script>

  <style>
    .updateButton {
      transition: all 200ms linear;
    }

    .rotate {
      transform: rotate(180deg);
      transition: all 200ms linear;
    }
  </style>
</head>


<div class="card m-2 m-md-3" style="box-shadow: 0 1px 2px; ">
  <div class="card-header bg-transparent p-3">
    <div class="row">
      <div class="col-12 col-md-6">
        <div>
          <h5 class="p-0">Dự đoán tổng tiền</h5>
          <div class="p-0 d-flex">
            <div class="">
              <label for="dryPrice">Mủ quy khô</label>
              <input type="text" class="form-control form-control-sm" id="dryPrice" placeholder="99.000" oninput="handleQuantityInput(this)" inputmode="numeric" />
            </div>
            <div class="mx-2">
              <label for="mixedPrice">Mủ tạp</label>
              <input type="text" class="form-control form-control-sm" id="mixedPrice" placeholder="19.000" oninput="handleQuantityInput(this)" inputmode="numeric" />
            </div>
            <div class="d-flex align-items-end">
              <button class="btn btn-primary" id="inputPrice">Nhập</button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 mt-3 d-flex align-items-end justify-content-start justify-content-md-end">
        <%- include('../partials/dateSelection.ejs') %>
      </div>
    </div>
  </div>
  <div class="card-body">
    <table class="table table-striped" id="query_table">
      <thead>
        <tr>
          <th rowspan="2">STT</th>
          <th rowspan="2">Ngày</th>
          <th colspan="3">Mủ quy khô</th>
          <th colspan="3">Mủ tạp</th>
          <th colspan="3">Mủ ké</th>
          <th rowspan="2">Ghi chú</th>
          <th rowspan="2">Tổng tiền</th>
        </tr>
        <tr>
          <th>SL</th>
          <th>Đơn giá</th>
          <th>TT</th>
          <th>SL</th>
          <th>Đơn giá</th>
          <th>TT</th>
          <th>SL</th>
          <th>Đơn giá</th>
          <th>TT</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot style="text-align: left;">
        <tr>
          <th colspan="2">Tổng</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<script>
  let queryColumns = [{
      data: 'no',
      orderable: false,
      width: '5%',
      visible: false
    },
    {
      data: 'date',
      width: '5%',
    },
    {
      data: 'dryQuantity',
      orderable: false,
      width: '10%'
    },
    {
      data: 'dryPrice',
      orderable: false,
      width: '10%'
    },
    {
      data: 'dryTotal',
      orderable: false,
      width: '15%'
    },
    {
      data: 'mixedQuantity',
      orderable: false,
      width: '15%'
    },
    {
      data: 'mixedPrice',
      orderable: false,
      width: '10%'
    },
    {
      data: 'mixedTotal',
      orderable: false,
      width: '15%'
    },
    {
      data: 'keQuantity',
      orderable: false,
      width: '15%'
    },
    {
      data: 'kePrice',
      orderable: false,
      width: '10%'
    },
    {
      data: 'keTotal',
      orderable: false,
      width: '15%'
    },
    {
      data: 'notes',
      orderable: false,
      width: '7%'
    },
    {
      data: 'totalMoney',
      width: '15%',
      orderable: false
    },
  ];
  initializeDataTable(
    '#query_table',
    '/truy-van/getDataTotal',
    '#staticBackdrop',
    '#deleteModalToggle',
    queryColumns,
    null,
    '#filterButton',
    '#startDate',
    '#endDate',
    '#clearFilterButton',
    false,
    true,
    '#inputPrice',
    '#dryPrice',
    '#mixedPrice',
    true,
  );
</script>