<head>
    <!-- js -->
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.colVis.min.js"></script>

    <script src="/js/exportDatatable.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/dataTables.buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/rowgroup/1.5.0/js/dataTables.rowGroup.js"></script>

    <script src="/js/inputFieldRestriction.js" defer></script>
    <!-- Slim select -->
    <script src="/js/slim-select.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css" />
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
  
    <style>
      /* Hide the spinners in input type number for Chrome, Safari, Edge, and Opera */
      input[type='number']::-webkit-outer-spin-button,
      input[type='number']::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
  
      /* Hide the spinners in input type number for Firefox */
      input[type='number'] {
        -moz-appearance: textfield;
      }
      .tooltip-wrapper {
        display: inline-block; /* Ensure the wrapper does not take full width */
      }
    </style>
  </head>

<!-- breadcrumb -->
<nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';" class="mx-2 mx-md-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/du-lieu-hang-ngay">Dự liệu hằng ngày</a></li>
      <li class="breadcrumb-item active" >
        <a href="/du-lieu-hang-ngay/<%= area.slug %>"><%= area.name %></a>
      </li>
      <li class="breadcrumb-item ">
        <a href="/du-lieu-hang-ngay/<%= area.slug %>/xuat-file">Xuất file</a>
      </li>
      <li class="breadcrumb-item " aria-current="page">
        <%= supplierData.name %>
      </li>
    </ol>
</nav>
  
  <div class="row m-0 m-md-2 g-3 mb-4">
    <div class="col-12 col-md-9 mt-2">
      <div class="card" style="box-shadow: 0 1px 2px">
        <div class="card-header bg-transparent">
          <div class="row">
            <div class="col-12 col-md-6">
              <h5 class="p-0">Chọn ngày và nhập số tiền</h5>
              <form action="/du-lieu-hang-ngay/<%= area.slug %>/updatePrice" method="post">
                <%- include('../partials/dateSelection.ejs') %>
                <div class="p-0 d-flex mt-2">            
                  <div>
                    <label for="dryPrice">Mủ quy khô</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="dryPrice"
                      name="dryPrice"
                      placeholder="99.000"
                      oninput="handleQuantityInput(this)"
                    />
                  </div>
                  <div class="mx-2">
                    <label for="mixedPrice">Mủ tạp</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="mixedPrice"
                      name="mixedPrice"
                      placeholder="19.000"
                      oninput="handleQuantityInput(this)"
                    />
                  </div>

                  <div class="mx-2">
                    <label for="kePrice">Mủ ké + đông</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="kePrice"
                      name="kePrice"
                      placeholder="19.000"
                      oninput="handleQuantityInput(this)"
                    />
                  </div>
                  <div class="d-flex align-items-end">
                    <button type="submit" class="btn btn-primary">Nhập</button>
                  </div>
                </div>
                <div class="p-0 d-flex mt-2">            
                  <div>
                    <label for="dryPrice">Cộng</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="dryPrice"
                      name="dryPrice"
                      placeholder="99.000"
                      oninput="handleQuantityInput(this)"
                    />
                  </div>
                  <div class="mx-2">
                    <label for="mixedPrice">Trừ</label>
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="mixedPrice"
                      name="mixedPrice"
                      placeholder="19.000"
                      oninput="handleQuantityInput(this)"
                    />
                  </div>

                  <div class="d-flex align-items-end">
                    <button type="submit" class="btn btn-primary">Nhập</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="card-body">
          <table class="table table-striped" id="table">
            <thead>
              <tr>
                <th>STT</th>
                <th>Ngày</th>
                <th>Mủ nước</th>
                <th>Hàm lượng</th>
                <th>Mủ quy khô</th>
                <th>Mủ tạp</th>
                <th>Mủ đông</th>
                <th>Chỉnh sửa</th>
              </tr>
            </thead>
  
            <tbody>
              <% area.data.forEach((item, index) => { %>
              <!-- Modal for updating -->

              <!-- Delete confirming modal  -->

              <% }) %>
            </tbody>
            <tfoot>
              <th colspan="2">Tổng</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-3 mt-2 d-none d-md-block">
      <div class="card" style="box-shadow: 0 1px 2px">
        <div class="card-header bg-transparent">
          <h4 class="m-0">Thông tin cá nhân</h4>
        </div>
        
        <form
        action="/du-lieu-hang-ngay/updateSupplier/<%= supplierData._id %>"
        method="post"
      >
        <div class="card-body">
            <%- include('../partials/notificationMessage.ejs') %>
            <div class="modal-body
            ">
            <div class="row">
              <div class="col col-md-6">
                <label for="name" class="form-label fw-bold"
                  >Tên</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  name="name"
                  maxlength="30"
                  value="<%= supplierData.name %>"
                  required
                />
              </div>
              <div class="col col-md-6">
                <label for="code" class="form-label fw-bold">Mã</label>
                <input
                  type="text"
                  class="form-control"
                  id="code"
                  name="code"
                  maxlength="20"
                  value="<%= supplierData.code %>"
                  required
                />
              </div>
            </div>
            <div class="mt-3">
              <label for="phone" class="form-label fw-bold"
                >Số điện thoại</label
              >
              <input
                type="text"
                class="form-control"
                id="phone"
                name="phone"
                maxlength="10"
                oninput="this.value = this.value.replace(/\D/g, '');"
                value="<%= supplierData.phone %>"
                required
                />
            </div>
            <div class="row">
              <div class="col-7 mt-3">
                <label for="identification" class="form-label fw-bold"
                  >Căn cước công dân</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="identification"
                  name="identification"
                  maxlength="12"
                  value="<%= supplierData.identification %>"
                  required
                />
              </div>
              <div class="col-5 mt-3">
                <label for="issueDate" class="form-label fw-bold"
                  >Ngày cấp</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="issueDate"
                  name="issueDate"
                  oninput="this.value = this.value.replace(/\D/g, '').replace(/(\d{2})(?=\d)/g, '$1/');"
                  maxlength="8"
                  value="<%= supplierData.issueDate %>"
                  required
                />
              </div>
            </div>
            <div class="mt-3">
              <label for="address" class="form-label fw-bold"
                >Địa chỉ</label
              >
              <input
                type="text"
                class="form-control"
                id="address"
                name="address"
                value="<%= supplierData.address %>"
                maxlength="70"
              />
            </div>
            <div class="mt-3">
              <label for="ratioSplit" class="form-label fw-bold"
                >Ăn chia</label
              >
              <input
                type="text"
                class="form-control"
                id="ratioSplit"
                name="ratioSplit"
                value="<%= supplierData.ratioSplit %>"
                min="1"
              />
            </div>
            </div>
          </div>
          <div class="card-footer bg-transparent
          ">
          <button type="submit" class="btn btn-primary
          ">Lưu mới</button>
        </div>
      </form>
      </div>
  </div>
</div>

  <script>
    //  const columns = [
    //   { data: 'no', visible: false, orderable: false },
    //   { data: 'date', visible: false },
    //   { data: 'supplierData', orderable: false },
    //   { data: 'code', orderable: false },
    //   { data: 'muQuyKhoQuantity', orderable: false, title: 'Quy khô' },
    //   { data: 'muQuyKhoDonGia', orderable: false, title: 'Đơn giá' },
    //   { data: 'muQuyKhoToTal', orderable: false, title: 'Tổng' },
    //   { data: 'muTapQuantity', orderable: false, },
    //   { data: 'muTapDonGia', orderable: false, title: 'Đơn giá' },
    //   { data: 'muTapTotal', orderable: false, title: 'Tổng' },
    //   { data: 'muKeDongQuantity', orderable: false, title: 'SL' },
    //   { data: 'muKeDongDonGia', orderable: false, title: 'Đơn giá' },
    //   { data: 'muKeDongTotal', orderable: false, title: 'Tổng' },
    //   { data: 'id', orderable: false },
    // ];
    
    initializeExportDataTable(
      '#table',
      `/du-lieu-hang-ngay/<%= area.slug %>/xuat-file`,
      '#staticBackdrop',
      '#deleteModalToggle',
      columns,
      'date',
      '#filterButton',
      '#startDate',
      '#endDate',
      '#clearFilterButton',
      true,
      true,
    );
  
    tippy('.tooltip-wrapper');
  </script>
  